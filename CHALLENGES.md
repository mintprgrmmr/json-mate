
---

### **Обновлённый CHALLENGES.md (исправлено на женский род, добавлено больше деталей про Swagger)**

```md
# CHALLENGES.md

Этот файл содержит сложные задачи, с которыми я столкнулась в процессе работы над проектом, и их решения.

## 1. Глубокое погружение в тестирование API (Pest, Feature-тесты)

### Проблема
На старте у меня были базовые знания о тестах, но я никогда не писала полноценные feature-тесты.  
Тесты падали, я не понимала, почему HTTP-статусы (404, 422, 302) возвращаются не так, как ожидалось.

### Решение
- Разобралась в Pest PHP и в том, как правильно писать feature-тесты.
- Исправила валидацию в контроллере, чтобы тесты возвращали ожидаемые статусы.
- Разделила тесты на файлы, сделав их более логичными.
- Освоила работу с `assertJsonFragment()` и `assertJsonValidationErrors()` для проверки API-ответов.

---

## 2. Исправление проблем с массовым удалением задач

### Проблема
Маршрут `delete-multiple` сначала использовал метод `DELETE`, и API не принимало массив `ids` в теле запроса.

### Решение
- Изменила метод `DELETE` на `POST`, чтобы передавать массив `ids`.
- Исправила валидацию, добавив `required|array|min:1|exists:tasks,id`.
- Научилась корректно проверять существование переданных ID в базе перед удалением.
- Исправила тест, чтобы он ожидал правильный статус ответа.

---

## 3. Гибкая фильтрация и сортировка задач

### Проблема
Фильтры и сортировка не работали при передаче `is_completed=1` или `is_completed=0`, так как они приходили в виде строк.

### Решение
- Использовала `$request->boolean('is_completed')`, чтобы приводить значения к булевому типу.
- Применяла `filled()` для корректной проверки наличия параметров в запросе.
- Освоила безопасную сортировку, проверяя переданный параметр через `in_array($request->sort, $allowedSorts)`, чтобы избежать SQL-инъекций.

---

## 4. Разобралась с HTTP-статусами и валидацией

### Проблема
Валидация возвращала 302 вместо 422, потому что Laravel по умолчанию редиректил на стандартные страницы ошибок.

### Решение
- Добавила `Accept: application/json` во все запросы, чтобы получать JSON-ответы вместо HTML.
- Разобралась с `assertJsonValidationErrors()`, чтобы тестировать конкретные ошибки валидации.
- Научилась корректно работать с исключениями в API (например, `abort(422)`).  

---

## 5. Исправление работы Swagger API-документации

### Проблема
Swagger не загружался, выдавая ошибку "Swagger configuration is missing."

### Решение
- Проверила конфигурацию `l5-swagger.php` в `config/` и убедилась, что все пути указаны верно.
- Прописала переменные окружения в `.env` (`L5_SWAGGER_...`).
- Проверила маршруты через `php artisan route:list` и исправила конфликт путей.
- Добавила обработку ошибок в `SwaggerController`, чтобы проще находить проблемы.

---

## 6. Создание профессиональной документации

### Проблема
README изначально был слишком простым и не соответствовал уровню проекта.

### Решение
- Оформила README в профессиональном стиле, добавив:
  - Описание API
  - Инструкции по запуску проекта
  - Примеры запросов
- Обновила `CHALLENGES.md`, зафиксировав важные моменты.
- Исправила ссылку на Swagger-документацию.

---

## Вывод

Этот проект позволил мне не только реализовать базовую функциональность, но и глубже разобраться в тестировании, Swagger, структуре API и работе с Laravel.  

В процессе работы я освоила:
- Feature-тесты с Pest PHP
- Корректную работу с HTTP-статусами и валидацией
- Фильтрацию, сортировку и безопасные API-запросы
- Оптимизацию структуры тестов и проекта в целом
- Использование Swagger для документирования API  

Этот опыт дал мне уверенность в разработке API и тестировании, а также научил работать с реальными задачами, возникающими в процессе разработки.

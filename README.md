# JSON-Mate API – API для управления задачами

JSON-Mate API – это API-сервис для управления задачами, позволяющий создавать, обновлять, удалять, сортировать и фильтровать задачи. 

## Установка и запуск

### 1. Клонирование репозитория
```sh
git clone <URL-репозитория>
cd json-mate
```

### 2. Установка зависимостей
```sh
composer install
cp .env.example .env
php artisan key:generate
```

### 3. Настройка базы данных
Заполни `.env` данными для подключения к базе данных, затем выполни:
```sh
php artisan migrate --seed
```

### 4. Запуск сервера
```sh
php artisan serve
```

## API-эндпоинты

### Создание задачи
**POST** `/tasks`
#### Пример запроса:
```json
{
  "title": "Новая задача",
  "description": "Описание новой задачи",
  "due_date": "2025-03-15T10:00:00",
  "priority": "высокий",
  "category": "Дом",
  "is_completed": 1
}
```

### Получение списка задач
**GET** `/tasks`
#### Фильтрация:
Можно фильтровать задачи по разным параметрам:
- `search` – поиск по названию
- `is_completed` – статус выполнения (`0` или `1`)
- `priority` – приоритет (`низкий`, `средний`, `высокий`)
- `category` – категория задачи

#### Сортировка:
Можно сортировать задачи по:
- `sort=due_date` – по дате выполнения
- `sort=created_at` – по дате создания
- `direction=asc|desc` – направление сортировки

Пример:
```sh
GET /tasks?sort=due_date&direction=asc
```

### Получение задачи по ID
**GET** `/tasks/{id}`

### Обновление задачи
**PUT** `/tasks/{id}`

### Удаление задачи
**DELETE** `/tasks/{id}`

### Массовое удаление задач
**POST** `/tasks/delete-multiple`
#### Пример запроса:
```json
{
  "ids": [4, 7, 8]
}
```

## Тестирование
Запустить тесты можно командой:
```sh
php artisan test
```
## Используемые инструменты тестирования
Для тестирования API использовались следующие инструменты:

- Pest PHP – для автоматического тестирования API, с проверками assertJsonFragment(), assertJsonValidationErrors(), assertDatabaseHas().
- cURL в командной строке (cmd) – для отправки ручных HTTP-запросов и анализа ответов.
- jq – для обработки и фильтрации JSON-ответов API.
- Плагин REST Client в VS Code – для удобного тестирования API-запросов без необходимости запускать Postman.

## Документация API (Swagger)
После запуска сервера документация будет доступна по адресу:
```
http://127.0.0.1:8000/api/docs
```
Если Swagger не отображает данные, можно сгенерировать файлы:
```
php artisan l5-swagger:generate
```
## Docker (экспериментально)
Минимальная конфигурация для запуска API в контейнере:
1. Установи Docker и Docker Compose
2. Запусти команду:
```
docker-compose up --build -d
```
3. API будет доступен по адресу http://localhost:9000

## Дополнительные возможности
- Фильтрация по статусу выполнения, приоритету, категории
- Поиск задач по названию
- Сортировка по дате создания или выполнения
- Массовое удаление задач
- Автоматически генерируемая Swagger-документация

---
**Разработано в учебных целях**

